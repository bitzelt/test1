<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: white; font-family: monospace; }
        canvas { display: block; }
    </style>
</head>
<body>

<script>
let mic;
let umbral = 0.05; 
let iniciado = false;

// --- ARTE ASCII INCRUSTADO ---
let bocaCerrada = `------------------------------------====================++++++++++++++++============================
-----=------------------------------==================++=++++++++++++++++===========================
-=--==--=---------------------------====================+++++++++++++++=============================
-=--==------------------------------====================++++++++++++++++============================
==-==---===-----========------------====================++++++++++++++++============================
==-==---=====-==========------------==================++++++++++++++++++============================
=-===--======================-------====================+++++++++++++++++===========================
=-===--=======================------==================++++++++++++++++++============================
=-===--========================----=====================+++++++++++++++=============================
=-===--========================----===================+=+++++++++++++++=============================
=-====-=========================---==================++=+++++++++++++++=============================
=================================--===================+++++++++++++++++=============================
======================================================+=+++++++++++++++=============================
=================================--====================++++++++++++++++=============================
============================================++++++======+++++++++++++++===+=========================
========================================+*##%@@@@%%@%#*##*++++++++++++=+============================
======================================*%@@@@@@@@@@@@@@@@@@@#*++++++++++=============================
===================================+*@@@@@@@@@@@@@@@@@@@@@@@@%*++++++++=============================
====================================*@@@@@@@@@@@@@@@@@@@@@@@@@@@%#*+++++============================
===================================*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#+++++============================
=================================+%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#++++=============================
================================#@@@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@%++==============================
===============================*@@@@@@%#@@##********##%%%@@@@@@@@@@@@+==============================
===============================#@@@@@#****++++++++++***###%@@@@@@@@@@%+=============================
==============================#@@@@#**+++++++++++++++******#@@@@@@@@@@+=============================
==============================#@@@***#%%%#*++++++*#%@@%%%####%@@@@@@@@#+============================
====+++=======================%@@%***********+++*#############%@@@@@@@%+============================
====+=========================@@@#**#%%%%##**++*####%@@%%%#####@@@@@@@%+============================
++++++=======================+@@@#*#%#%@@###*++*#####@@##%%####%@@@@@@#++===========================
++++++========================%@@*****#####**++**#########***###@@@@@@#+============================
++++++========================+@@**+*+******+++***************##@@@%%%*=============================
+++++++========================#%*+++++++*******#***++********##@@%#%#+=============================
++++++=========================+#***++++++*#%##%%##***+******###@@@##*++============================
++++++=++=======================*****+++++********************####%##++=============================
++++++++========================+****++**********************#*#####*+++============================
+++++++=========================+*********########%###******######**++++============================
=++++++=========================+****+*******#####**********###@@%#++++=============================
+++++++===========================+************************###@@@@*++++=============================
++==+++===========================+*******+++++++*****########@@@%+++++=============================
+++++++============================+****************##########@@@#++++++============================
+++++++============================+****######################@@@++++++++===========================
++++++=============================+++****####################@@*++++=++============================
+++++++===+==========================+********#################*+++++===============================
+++++++===============================************############++++++++++============================
++++++==============+================+************############*+++++++++============================
+++++++============================+++**********##############*++++++++=============================
+++++++==========================+++++*************####**###*+++++++++++============================
+++++++==+========================+=+++*#*********#####*##**+++++++++++++++=========================
++++++=============================+=+++%###############*++++++++++++++++++++++=====================
++++++==============================++++++++++*******+++**++++++++++++++++++++++++==================
++++++==============++++++*++========+++++++++++++++++++++++++++++++++++*++++***++++=++++===========
++++++========+===+++**++*++*+=======++++=========++++++++*++++++++++******++***+++*++===+++========
++++++========+++++*+++*+*****++===++**++++++++++++++++**++++++**+++++##+++**#+++***+=++++++++======
++++======+===++++++**+++*#*++*+++++++**+++====+=++++**+++++++*#*+++***+++*#++****+++++==++++++=====
+++=====++======++++***+++**++**+++*+++**++======++***++++++**+++++++++++**+++*#*+++++++=====++=====
+++======+++++=+=+++++**++++++++++++**+++*++====++**++++++++++++++++++++++++*##++++++**+======+=====
++========+++++++++*+++++++++++++++++++++**++==++**+++++++++++++++++++++++++**++******+====+++++====
++=========+*+++++++++++++++++++++++++++****++++**+++++++++++++++++++++++++++++*##*+===+++++++++====
++===========*#*++++++++++++++++++++++++**#*+++**++==++++++++++++++++++++++***#%*+====+++==+++++====
++=+====++====+***++++++++++++++++++++++**#*+++*++++++++++++++++++++++++++****+==========+++++++====
+=========+++++++**++++++++++++++++++++====++++*++===+++++++++++++++++++++**+==========+++++++++====
+===========++++++++*++++++++++++++++=========+*+++====+++++++++++++++++**+===========+++++++++=====
===========+==+++++++***+++++++++++=============++=======++++++++++*++**+==============++++**++=====
===========+=+++++++++*********+++==========================+++++****##+=================++++++=====
=====+++++===+++++++++++****###**+++===========================+*##%@%+==========+++=++=++++++++====
+======+++++===++++++++++++****#*++===============================+%#+====+++++==+==+=+++++++++++===
++========++++===+++++++++++*++*+++=================================++====+++++===+++++++++++++++=+=
++===========+=+==+++++++++++++*+++++===============================+========++===+++++++=++++++====
+++============++===++++++++++++**++++====+++++===============================++===++++++++++++=====
++===============++=+++++++++++++++**++==+===========================+=========**+=++++++++++++=====
++=================+++++++++++++++++=+*++============================++=========+*+=++++++++++======
++===================+++++**+==++++==+++++============================+==========+++=++++++++++=====
+==============+++++++++++++==+++====++=+++++=========================++==========++=+++++++++======
++=========+++++++++**++++===++++===++===+*+++=========================++=====+======+++++++++=+====
+========+++=======++=+++===++++====++===++++++=+======+++============+=++=========++++++++++==+=+==
*+===============+++========++++====++==+++++*+++++++===++++============++=========+++++++++=+======
++=======+++=====++=+++====+++++===+++=++++++***+++++++++=+++++==========++===++++++++++++++=+++====
+=======++++=======+++====+++++====+++=++++++*****++++++++++++++==========++==++++++++++++==++======
+++++==++++======+++++===++++++===+++++++++++*****#*+++++++++++++++=======++++++++++++++++=+======++
+++++===========++++++++=+++++===+++++++++++*****#%%#*+++++++++++++++==++=+++++++++*+++++++++=+==+=+
++++++++++======+++++++=++++++==++++++++++******#%%%##****+++++++++++++++++++++++++**++++=++===+=++=
++++++++=======+++++++++++++++++++++++++*******#%%###*********+++++++++++++++++++****+++++++=++++=+=
++++++++++===++=+++++++++++++++++++++++******#######******************+++++++++*****++++++++++++++++
++++++++++===++++++++++++++++++++++++******########***+****************++++++++****+++++++++++++=+=+
++++++++++++++++++++=+++++++++++++*******#########****+++***************+++++*****++++++++++++++++++
+++++++++++++++++++==+++++++++++++****###########**++++*+*************************++++++++++++++++++
++++++++++++++++++++++++++++++++++**####**###*****+++++*+*++*********************+++++++++++++++++++
+++++++++++++++++++++++++++++++****#######******++++++++**+***********************#%%%%%%%%%@@@@@@@@
*****++++++++++++++++++++++++****######******++++++++++*++++****************************************
%%%##########*++++++++++++++*****######****++++++++++++++++++**********************++++++++++++++++=
%%%%%%%%%%%%%*++++++++++++********##*****++++++++++++++++++++**********************+++++++++++++++==
############*++++++++++*****###*******+++++++++++++++++++++++++++*******************++++++++++++====
*************++++++++*******####*****++++++++++++++++++++++++++*************#######**++++++++++=====
**+*+++++++++++++++++++************++++++++++++++++++++++*******####%%%%%%%%#########*++++++++======
*****+++++++++++*******************************#####****************#####%%%%%#######*++++++========
++++++++++===+++++***##%%@@@%%%#####*********+++++**+**********###%%%%##*++++++++++***+++++=========
++==============+=====+++++++**###########*****+++++++++++++**##**++++++++++++======================`;

let bocaAbierta = `----------=---=---=-==----------------==========+======+++++++++++++++++++++++++++++=+++=++=++======
----------===--====-------------------==========++=====+++++++++++++++++++++++++++++++++++=+++======
---------======-========-=------------==========+======+++++++++++++++++++++++++++==+++=++++=+======
---------==============---=====-------==========++=====+++++++++++++++++++++++++++==+++=============
-------=================--====--------==========++=====+++++++++++++++++++++++++++==+++=============
---=---=-=====================-====---==========+======++++++++++++++++++++++++++++++++++=+++=======
====--==-=========================----==========+======+++++++++++++++++++++++++++==+======+++======
====-===-=====================-====--===========+======+++++++++++++++++++++++++++++==+=============
========-==========================--===========+======+++++++++++++++++++++++++++==++=++===========
=======--=========================-=-===========+======+++++++++++++++++++++++++++=+++++++=+========
=======-==========================-=-===========+======+++++++++++++++++++++++++++++=++++===========
====================================-==========+=======++++++++++++++++++++++++++++++=++++=+========
===================================--===========+======++++++++++++++++++++++++++++++========+======
===============================================++======++++++++++++++++++++++++++++++========+======
===============================================++======+++++++++++++++++++++++++++++=========+======
=======================================================+++++++++++++++++++++++===============+======
===============================================+=======++++++++++++++++++++++++++++=+++=+===========
===============================================++=====++++++++++++++++++++++++++++=++++==+=+========
==============================================++++++==+++++++++++++++++++++++++++++=++==============
==========================================++*#%@@%@####++++++++++++++++++++++++++++++++=++==========
========================================+*%@@@@@@@@@@@@@@@@@@#++++++++++++++++=+====================
=====================================+*%@@@@@@@@@@@@@@@@@@@@@@%#++=+++++++++++======================
=====================================+#@@@@@@@@@@@@@@@@@@@@@@@@@@@#*+++++++++++=+=+=++++++==+===+===
=====================================+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*++++++++++++===++==++=++=+++===
====================================#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*++++++++++++==++++++=+++=====+=
+=================================#@@@@@@@%@@@%%@@@@@@@@@@@@@@@@@@@@%+++++++++++++==++==+==++=======
+++==============================#@@@@@@%%@@##**######%%%%@@@@@@@@@@@@*++++++++++++++++++==++======+
+++=============================+@@@@@@####**+++++++++***###@@@@@@@@@@@+++++++===================+==
+++++===========================#@@@@#***+++++++++++++++****#@@@@@@@@@@*=++++=======================
++++++++========================@@@@*+*###***++++++**##%%##**#%@@@@@@@@%+++++========+==============
++==++++=======================+@@@#******###*+++*##%%##########@@@@@@@@++++++=+=====+++===+=+======
+=+++++++======================*@@@***######**+++*##############%@@@@@@@*++++++++++++++++=+=========
++=+++++=======================*@@@**#%*%@%*#**+**##%*#%@#%%#####@@@@@@@++++++++=++++=+=============
++++++++=======================+@@%***######**++**###############@@@@@@@+++++++++++=++=============+
++++++++========================%@#+**********++*****************%@@@##%+++++======================+
++++++++========================*@*+++++*****+++*****************%@@#%%*+++++=======================
++++++++=========================%**+++++++**@#*%%##************#@@@###++++++=======================
++++++++=========================+*****++++****#####**********###%%@%#*+++++======+++++==+==========
+++++++++========================+******++****++*************#######*#+++++++=+=++++++++++=====+====
++++++++++========================+***********###************########+++++++++==+++=++==+======++=+=
++++++++++++======================+****+***#@@@@@@@##********#######*+++++++++++=++++=============+=
+++++++++=++++=====================+******#@@@@@@@@@@#**********@@@@+++++++++===============+=====+=
+++++++++++++=+====================+*******#@%####%%#**********#@@@#+++++++++====================+==
++++++++++++++++====================+********#**####*****#*###*@@@%++++++++++==============+=+====+=
+++++++++++++==++====================+*******#######****#######@@@#+++++++++++=====+++=====+========
+++++++++=+++==+++++=================#+****************########@@@*+++++++++++=++++++++=============
+++++++++++++===++++++===============++**************##########%@*+++++++++++++++++++++++===========
+++++++++++++===++++===================*********###############*++++++++++++++++++++++++++++========
++++++++++++=====+===+=================*****##################**+++++++++++++====++++====+==========
+++++++++++++====+====================+********#################*+++++++++++++===+++=====++=========
++++++++++++++======================+++***********#############*++++++++++++++=+=+======++==========
++++++++++++++====+===================++*********#############++++++++++++++++++++++==+=++==========
++++++++=+++++===========+======+===+=+++********###########*+++++++++++++++++++++++++++++++=====+=+
++++++++++++=++====+===+++======+===+++++*###*###########*+*+++++++++++++++++++++++++++++=====++++++
+++++++++++++++====++==+++=++====+===++++++++++++++++++++++++++++++++++++++++++++++++++++=======++++
+++++++++++++++===+++++++++*+++=+++===++++++++++++++++++++++++++++++++++***+++****++++++++++======+=
++++++++=+=+==++++++++++++*++*+++++==++++++==++=+++++++++***++++++++++***#***++**++++++++++++++=====
+++++++========++++***++****++**+++++***++++++++++++++*****++++**#***+***+++***++++**+++++++++++==+=
++++++==+++++==++++++**+++*#+++**+++*+***++++=+++++++****+++++****+++**++++**++***#*+++++++++++++===
+++++====++++++=++++++**+++**++***++**++**++++==++++***+++++***++++++++*****++**#*++*+**++=+++++++==
++++======+++++++++*++++*++++++++++++**+++**+===++***+++++++++++++++++++++++**##+++++***++++=+++++=+
++++=======+**++++++**++++++++++++++++++++***+=+++**+++++++++++++++++++++++****++*****+++++++++++===
+++==========+***++++++++++++++++++++++*****#++++**++==+++++++++++++++++++++++++*###+=+++++++++++===
++++===++=====+***++++++++++++++++++++++***##++++*++=++++++++++++++++++++++*****#+==+++++++++++++===
++++++==+++++++++**+++++++++++++++++++++++**#+++**++=+++++++++++++++++++++*****+===++++++++++++++===
+++++++===+++++++++**+++++++++++++++++++====++++*+++++++++++++++++++++++++***+++++++++++++++++++++=+
++++++++=====++++++++**+++++++++++++++=========+*++++++++++++++++++++++++**+==++++++++++++++++++++++
++=====++==+++==++++++****++++++++++=============++=======++++++++++*+**#*+=+======++++++++++**++=++
++==++++++==+++++++++*++********+++++++==============+=======+++++****#%++=======+++++++++++++++====
++===+++++++==+++++++++++****##**+++++++=============+==========+*##%@@+====+++=+++++++++++++++*++++
+++=====++++++==+++++++++++*****#*++++++++===========+=============+%#++==+++*++==++++++++++++++++++
+++==+=====++++==++++++++++++****+++++++=+===========+==============+++====++++===++++++++++++++++++
++++===+======+++==+++++++++++++++++++++++==++=======+===============+========++==++++++++++++++++++
+++++===+=======+++++++++++++++++++++++++=++++++++====+==============+========+*+==+++++++++++++++++
++++=======+======++++++++++++++++++**++++++====++++==+==============++========+**+=++++++++++++++++
++++===============++++++++*+++++++++++*++===+====++++================++========+**+++++++++++++++++
++++===================++++**+=+++++==++++++++==+++++++===============++=========+++=+++++++++++++++
++++==========++++++++++++++==+++++==+++++++++++++++++++++=+++++=======+++===++====+=+++++++++++++++
+++========+++++==+++**++++==+++++===++++++*+++++++++++++++++++++=======++===+++===+=+++++++++++++++
+++=======+++==+==++++=+++==++++++===+++++++++++++++++++++++++++++======+++==+++===+++++++++++++++++
***==+++++==+++===+++=++++=++++++===+++++++++++++++++++++++++++++++==++++++==+++++++++++++++++++++++
+++=+++=++++++===+++=+++++=++++++===++++++++++**+++++++++++++++++++=+++++++==+++++++++++++++++++++++
+++==++++++++=====+++++++=++++++===+++++++++++****++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++====++++++++==++++++==+++++++++++*******+++++++++++++++++++++++++++++++++*++++++++++++++
++++++++++++===++++++++++++++++==+++++++++++*******##*+++++++++++++++++++++++++++++++***++++++++++++
+++++++++++====++++++++++++++++=+++++++++++*******%%%##****++++++++++++++++++++++++****+++++++++++++
+++++++++++===+++++++++++++++++++++++++++*******##%###*********++++++++++++++++++*****++++++++++++++
+++++++++++++++++++++++++++++++++++++++********#####***********###***++++++++++******+++++++++++++++
+++++++++++++++++++++++++++++++++++++*******########*******************+++++++******++++++++++++++++
+++++++++++++++++++++++++++++++++++*******########***********************++++*******++++++++++++++++
+++++++++++++++++++++++++++++++++*******#########***++**********************+******+++++++++++++++++
++++++++++++++++++++++++++++++++*****##########****++++****************************+++++++++++++++++
+++++++++++++++++++++++++++++******##########****++++++*****************************%%%%%%%%%%%%%%%%
++++++++++++++++++++++++++++++****#########****+++++++++****************************###%%%%%%%%%%%%%
##############+++++++++++++******########****++++++++++++****************************+++++++++++++++
%%%%%%%%%%%%%%#++++++++++********#####*****+++++++++++++++***************************+++++++++++++++
##############*+++++++++****##***********++++++++++++++++++**************************++++++++++++++=`;

function setup() {
    createCanvas(windowWidth, windowHeight);
    mic = new p5.AudioIn();
    
    textFont('monospace');
    textSize(4);      
    textLeading(3.8); 
    noStroke();
}

function draw() {
    background(255); // Fondo Blanco
    fill(0);         // Letras Negras

    if (!iniciado) {
        textSize(20);
        textAlign(CENTER, CENTER);
        text("HACÉ CLIC PARA ACTIVAR EL MICRÓFONO", width/2, height/2);
        return;
    }

    let vol = mic.getLevel();
    textAlign(LEFT, TOP);
    textSize(4); 

    if (vol > umbral) {
        text(bocaAbierta, 10, 10);
    } else {
        text(bocaCerrada, 10, 10);
    }

    // Monitor de volumen (barra gris suave abajo)
    fill(200); 
    let barWidth = map(vol, 0, 0.5, 0, width);
    rect(0, height - 10, barWidth, 10);
}

function mousePressed() {
    if (!iniciado) {
        userStartAudio(); 
        mic.start();      
        iniciado = true;
    }
}

function windowResized() {
    resizeCanvas(windowWidth, windowHeight);
}
</script>
</body>
</html>